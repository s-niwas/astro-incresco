---
import { Icon } from "astro-icon";
import ContentSection from "~/components/home/ContentSection.astro";
import Steps from "./Steps.astro";
import { useStoryblokApi } from "@storyblok/astro";

const storyblokApi = useStoryblokApi();
let content;
try {
  const { data } = await storyblokApi.get("cdn/stories/featuresection", {
    version: import.meta.env.DEV ? "draft" : "published",
  });
  content = data.story.content;
} catch (error) {}
---

<ContentSection title={content?.featureTopSection[0]?.title} id="about">
  <Steps features={content?.features} />
  <Fragment slot="lead">
    {content?.featureTopSection[0]?.subTitle}
  </Fragment>
  <a
    href={content?.communicateSection[0]?.url}
    class="flex items-center justify-center gap-3 border-2 border-current px-6 py-4 hover:scale-110"
  >
    <Icon name={content?.communicateSection[0]?.icon?.icon} class="h-8" />
    <span>{content?.communicateSection[0]?.buttonText}</span>
  </a>
</ContentSection>
